# 494. 目标和

---

👉 [494. 目标和](https://leetcode-cn.com/problems/target-sum/)

## 📜 题目描述

给定一个非负整数数组，a1, a2, ..., an, 和一个目标数，S。现在你有两个符号 + 和 -。对于数组中的任意一个整数，你都可以从 + 或 -中选择一个符号添加在前面。

返回可以使最终数组和为目标数 S 的所有添加符号的方法数。

示例：

```
输入：nums: [1, 1, 1, 1, 1], S: 3
输出：5
解释：
-1+1+1+1+1 = 3
+1-1+1+1+1 = 3
+1+1-1+1+1 = 3
+1+1+1-1+1 = 3
+1+1+1+1-1 = 3
```

一共有5种方法让最终目标和为3。

## 💡 解题思路

**【动态规划法】**：可以转换为典型的 **0-1 背包问题**。把所有符号为正的数总和设为一个背包的容量，容量为 `x`；把所有符号为负的数总和（绝对值）设为一个背包的容量，容量为 `y`。令 `sum `为数组的总和，则 `x+y = sum`。而两个背包的差为 `S` ,则 `x-y=S`。从而求得 `x=(S+sum)/2`。

基于上述分析，题目转换为 0-1 背包问题：给定 `N` 个物品和一个容量为 `x=(S+sum)/2` 的背包，每个物品只能使用一次（我们已经假设出所有正数和负数绝对值的和，即数组中每个数都是确定的且只能使用一次，相当于 0-1 背包问题每个物品只能使用一次），第 `i` 个物品的重量为 `nums[i]` （即数值大小），求有多少种方式恰好让背包装满。

## ✅  具体代码

此处我们就不从二维再压缩到一维了，都是套路，如果还是不清楚二维辅助表该如何写的兄弟们可以参考该篇文章 背包问题 部分  👉 [https://veal98.gitee.io/cs-wiki/#/计算机基础/算法/5-动态规划](https://veal98.gitee.io/cs-wiki/#/计算机基础/算法/5-动态规划)。

直接上一维辅助表的代码，注意两个特殊情况的处理：


```java
class Solution {
    public int findTargetSumWays(int[] nums, int S) {
        int len = nums.length;

        int sum = 0; // 数组所有数的和
        for(int num : nums){
            sum += num;
        }

        // 背包容量 x=(S+sum)/2 为整数，若 sum+S 为奇数的话不满足要求
        if((S+sum)%2 == 1)
            return 0;
        // 目标和不可能大于总和
        if (S > sum){
            return 0;
        }

        // 辅助表：为最终数组和为 i 添加符号的方法数为 dp[i]
        // 即有 dp[i] 种方法可以装满重量为 i 的背包
        int[] dp = new int[(S+sum)/2 +1];
        // base case
        dp[0] = 1; // 背包重量为 0，只有一种方法即不装任何东西
        for(int i = 1; i <= len; i ++){
            for(int j = (S+sum)/2; j - nums[i-1] >= 0; j --){
                dp[j] = dp[j] + dp[j - nums[i-1]]; // 方法数之和
            }
        }

        return dp[(S+sum)/2];
    }
}
```

