# 🧀 物理层

---

## 思维导图

![](https://gitee.com/veal98/images/raw/master/img/20200709173322.png)



## 一、物理层的作用

在物理层上所传送的数据单位是比特。

物理层(physical layer)的作用是实现相邻计算机节点之间比特流的透明传送，尽可能屏蔽掉具体传输介质和物理设备的差异。 使其上面的数据链路层不必考虑网络的具体传输介质是什么。“**透明传送比特流**”表示经实际电路传送后的比特流没有发生变化，对传送的比特流来说，这个电路好像是看不见的。

## 二、三种通信方式

### 1. 单工通信

发送方和接收方固定，单向传输，仅需要一条信道（类比广播）

<img src="https://gitee.com/veal98/images/raw/master/img/20200429211746.png" style="zoom:67%;" />

### 2. 半双工通信

通信的双方都可以发送和接收，但不能同时发送和接收，交替传输，需要两条信道（类比对讲机）

<img src="https://gitee.com/veal98/images/raw/master/img/20200429211821.png" style="zoom:67%;" />

### 3. 双工通信

双方可以同时发送和接收，双向同时传输（类比打电话）

<img src="https://gitee.com/veal98/images/raw/master/img/20200429211857.png" style="zoom:67%;" />

## 三、两种数据传输方式

### 1. 串行传输

将表示一个字符的8位二进制数按照从低位到高位的顺序，在一条信道按照顺序发送

特点：速度慢，费用低，适合远距离

<img src="https://gitee.com/veal98/images/raw/master/img/20200425113116.png" style="zoom:80%;" />



### 2. 并行传输

将表示一个字符的8位二进制数同时通过8条信道发送，接收方再根据顺序重新组装这些数据

特点：速度快，费用高，适合近距离（远距离传输时，线间干扰导致可靠性下降）

<img src="https://gitee.com/veal98/images/raw/master/img/20200425113229.png" style="zoom:80%;" />

## 四、实现同步的传输方式

**同步**：接收方在时间上与发送方取得同步，以便能够正确的识别和接收发送方发来的数据

### 1. 同步传输 Synchronous Transmission

**同步传输就是发送方和接收方的时钟要同步**，数据的传送以一个**数据块**为单位，因此同步传输也称区块传输

- 发送：同步符号(起始字符)＋数据块＋同步符号(结束字符） 

- 接收：遇到同步符号，开始接收数据，直到结束符号为止。 

- **同步符号**：标识数据块的开始和结束 

- 可能存在的问题：假同步现象 — **数据块中含有与同步符号相同的内容** 

  解决方法：增加匹配同步符号的难度 <u>SYN</u>,<u>SYN</u>,G,H, …,B,A,SYN,D,E,<u>SYN</u>,<u>SYN</u> 传输方向

打个比方：就像双方约好了发送方每过一个小时就发送一次打包好的数据（帧）给接收方，接收方也每过一个小时接收一次数据（帧）。但是接收方不明白这一串数据得有多长，不能说传过来的数据收了一半就算完成了，所以得有起始位和结束位方便识别接受到的数据是否完整。

### 2. 异步传输 Asynchronous Transmission

**异步传输就是发送方和接收方没有时钟同步**。异步传输<u>将比特分成小组进行传送，小组可以是8位的1个字符或更长</u>。发送方可以在任何时刻发送这些比特组，而接收方并不知道它们会在什么时候到达。

一个常见的例子是**计算机键盘与主机的通信**。按下一个字母键、数字键或特殊字符键，就发送一个8比特位的ASCII代码。键盘可以在任何时刻发送代码，这取决于用户的输入速度，内部的硬件必须能够在任何时刻接收一个键入的字符。

异步传输存在一个潜在的问题，即接收方并不知道数据会在什么时候到达。在它检测到数据并做出响应之前，第一个比特已经过去了。这就像有人出乎意料地从后面走上来跟你说话，而你没来得及反应过来，漏掉了最前面的几个词。因此，**每次异步传输的信息都以一个起始位开头**，它通知接收方数据已经到达了，这就给了接收方响应、接收和缓存数据比特的时间；在传输结束时，**一个停止位表示该次传输信息的终止**。

<br>

**同步传输通常要比异步传输快速得多**。接收方不必对每个字符进行开始和停止的操作。一旦检测到帧同步字符，它就在接下来的数据到达时接收它们。

### 3. 同步传输和异步传输的区别

- 异步传输是面向字符的传输，而同步传输是面向比特的传输。
- 异步传输的单位是字符，而同步传输的单位是帧。
- 异步传输通过字符起止的开始和停止码抓住再同步的机会，而同步传输则是以数据中抽取同步信息。
- 异步传输对时序的要求较低，同步传输往往通过特定的时钟线路协调时序。
- 异步传输相对于同步传输效率较低。

简单来说：

- 同步传输就是，数据没有被对方确认收到则调用传输的函数就不返回。接收时，如果对方没有发送数据，则你的线程就一直等待，直到有数据了才返回，可以继续执行其他指令

- 异步传输就是，你调用一个函数发送数据，马上返回，你可以继续处理其他事，接收时，对方的有数据来，你会接收到一个消息，或者你的相关接收函数会被调用。

形象点说：

- **异步传输: 你传输吧，我去做我的事了，传输完了告诉我一声**
- **同步传输: 你现在传输，我要亲眼看你传输完成，才去做别的事** 

## 五、数据通信相关术语

### 1. 码元

码元是指用一个固定时长的信号波形（数字脉冲），代表不同离散数值的基本波形

**1 码元可以携带多个比特的信息量**

2进制编码 ---> 2种码元 0 和 1 ，称为二进制码元：0 1

4进制码元---> 4种不同的信号波形：01 10 00 11

### 2. 速率

- `码元传输速率`：1s 传输多少个码元 ，单位：**波特** Baud
- `信息传输速率`：1s 传输多少个比特

## 六、奈氏准则、香农定理

### ① 失真

发送的信号波形失真导致无法识别

失真的一种现象：**码间串扰**

接收端收到的信号波形因为振动太快（传播速度太快）失去了码元之间清晰界限的现象

![](https://gitee.com/veal98/images/raw/master/img/20200511222513.png)



### ② 奈氏准则

在任何信道中，码元传输速率是有上限的，若传输速率超过此上限，就会出现码间串扰问题

奈氏准则提出了在假定的理想条件下（**无噪声**，带宽受限），为了避免码间串扰，**码元传输速率的上限是 2W 波特**（W 是带宽 Hz）

也就是说，信道的频带越宽，就可以用更高的速率进行码元的有效传输

**最大数据传输率 =  2Wlog2V (b/s) （V 表示有几种码元）**

### ③ 香农定理

香农定理：在带宽受限且**有噪声**的信道中，为了不产生误差，**信息的数据传输速率上限值为：Wlog2(1+S/N) （b/s)，其中 S/N 代表信噪比**

也就是说，信道的带宽或者信噪比越大，则信息的最大传输速率就越高

## 七、编码与调制

编码与调制其实就是模拟信号和数字信号的转换过程

<img src="https://gitee.com/veal98/images/raw/master/img/20200429204758.png" style="zoom: 50%;" />

###  1. 数字信道和模拟信道

**数字信道**是能传输数字信号的信道。数字信号传输的是不连续的、离散的二进制脉冲信号。在它的整个信号中只有两种状态，高电平与低电平，高电平用逻辑1表示低电平用逻辑0表示。

**模拟信道**是能传输模拟信号的信道。模拟信号的电平随时间连续变化，具有周期性的正弦波信。语音信号是典型的模拟信号。模拟信号一般通过PCM脉码调制方法量化为数字信号，即让模拟信号的不同幅度分别对应不同的二进制值。

### 2. 基带信号和宽带信号

- `基带信号`：数字信道上传输，**保持数据波的原样进行传输。适合距离较近，信号可同时向两个方向扩散**

  <img src="https://gitee.com/veal98/images/raw/master/img/20200430103633.png" style="zoom:50%;" />

- `宽带信号`：模拟信道上传输，**把基带信号经过载波调制后**，把信号的频率范围搬移道较高的频段以便在信道中传输。**适合距离较远，信号仅向一个方向扩散**

  <img src="https://gitee.com/veal98/images/raw/master/img/20200430103650.png" style="zoom:50%;" />

### 3. 编码：数据——>数字信号

#### ① 数字数据——>数字信号

- **非归零编码**
   高1低0，没有检错功能
   
- **曼彻斯特编码**
   一个码元分成两个间隔，前低后高表示1，前高后低表示0（自己定）
   
   ![](https://gitee.com/veal98/images/raw/master/img/20200709173355.png)
   
- **差分曼彻斯特编码**
   同1异0
   
   ![](https://gitee.com/veal98/images/raw/master/img/20200709173405.png)
   
- **归零编码**
   信号电平在一个码元内都要恢复到0
   
- **反向不归零编码**
   电平反转表示0，状态不变表示1
   
- **4B/5B编码**
   
   ![](https://gitee.com/veal98/images/raw/master/img/20200709173414.png)

#### ② 模拟数据——>数字信号

- 抽样
- 量化
- 编码

### 4. 调制：数据——>模拟信号

#### ① 数字数据——>模拟信号

- 调幅
- 调频
- 调相
- 调频 + 调相

#### ② 模拟数据——>模拟信号

频分复用

## 八、物理层传输介质

### 1. 导向型传输介质

- **双绞线**：适用于近距离
- 屏蔽双绞线
  
- 无屏蔽双绞线
  
- **同轴电缆**（抗干扰性强）：适用于远距离
- **光纤**：带宽远远大于其他传输媒体
- 单模光纤：适合远距离
  
- 多模光纤：适合近距离


### 2. 非导向型传输介质

- 无线电波
- 微波
- 红外线、激光

## 九、物理层设备

### 1. 中继器

对信号进行再生和还原，增加信号传输的距离，延长网络的长度

![](https://gitee.com/veal98/images/raw/master/img/20200510155129.png)

### 2. 集线器（多口中继器）

集线器不能分割冲突域，连在集线器上的工作主机平分带宽

![](https://gitee.com/veal98/images/raw/master/img/20200709173432.png)